# three-pathfinding

Navigation mesh toolkit for ThreeJS, based on [PatrolJS](https://github.com/nickjanssen/PatrolJS).

## Installation

```
npm install --save three-pathfinding
```

## Example

```js
  // Create level.
  const ZONE = 'level1';
  const zone = Path.buildNodes(this.navMesh.geometry);
  Path.setZoneData(ZONE, zone);

  // Find path from A to B.
  const group = Path.getGroup(ZONE, a);
  const path = Path.findPath(a, b, ZONE, group);
```

## API

<!--- API BEGIN --->

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [buildNodes](#buildnodes)
-   [setZoneData](#setzonedata)
-   [getGroup](#getgroup)
-   [getRandomNode](#getrandomnode)
-   [getClosestNode](#getclosestnode)
-   [clampStep](#clampstep)
-   [findPath](#findpath)

## buildNodes

Builds a zone/node set from navigation mesh.

**Parameters**

-   `geometry` **THREE.Geometry** 

Returns **Path.Zone** 

## setZoneData

Sets data for the given zone.

**Parameters**

-   `zoneID` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `zone` **Path.Zone** 

## getGroup

Returns closest node group for given position.

**Parameters**

-   `zoneID` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `position` **THREE.Vector3** 

Returns **Path.Group** 

## getRandomNode

Returns a random node within a given range of a given position.

**Parameters**

-   `zoneID` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `group` **Path.Group** 
-   `nearPosition` **THREE.Vector3** 
-   `nearRange` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

Returns **Path.Node** 

## getClosestNode

Returns the closest node to the target position.

**Parameters**

-   `position` **THREE.Vector3** 
-   `zoneID` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `group` **Path.Group** 
-   `checkPolygon` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**  (optional, default `false`)

Returns **Path.Node** 

## clampStep

Clamps a step along the navmesh, given start and desired endpoint. May be
used to constrain first-person / WASD controls.

**Parameters**

-   `start` **THREE.Vector3** 
-   `end` **THREE.Vector3** Desired endpoint.
-   `node` **Path.Node** 
-   `zoneID` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `group` **Path.Group** 
-   `endTarget` **THREE.Vector3** Updated endpoint.

Returns **Path.Node** Updated node.

## findPath

Returns a path between given start and end points.

**Parameters**

-   `startPosition` **THREE.Vector3** 
-   `targetPosition` **THREE.Vector3** 
-   `zoneID` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `group` **Path.Group** 

Returns **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;THREE.Vector3>** 
<!--- API END --->

## Thanks to

* [PatrolJS](https://github.com/nickjanssen/PatrolJS)
* [bgrin's astar library](https://github.com/bgrins/javascript-astar)
* [Digesting Duck's Simple Stupid Funnel Algorithm](http://digestingduck.blogspot.jp/2010/03/simple-stupid-funnel-algorithm.html)
* [Recastnavigation's level mesh](https://github.com/memononen/recastnavigation)

